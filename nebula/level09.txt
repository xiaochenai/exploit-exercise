pass argument "xzl0036@auburn.edu" to first function
output is:
xzl0036 AT auburn dot edu
This site is used to test php codes in this exercise:
http://writecodeonline.com/php/
about preg_replacce():
http://php.net/manual/zh/function.preg-replace.php
about "/e":
http://stackoverflow.com/questions/15454220/replace-preg-replace-e-modifier-with-preg-replace-callback
  $contents = preg_replace("/(\[email (.*)\])/e", "spam(\"\\2\")", $contents);
  $contents = preg_replace("/\[/", "<", $contents); replace "[" with <
  $contents = preg_replace("/\]/", ">", $contents); replace "]" with >

I tested
echo preg_replace("/(\[email (.*)\])/e", "spam(\"\\2\")", "xzl0036@[email.]edu xzk0036@auburn.edu abc");
the output is:
xzl0036@[email.]edu xzk0036@auburn.edu abc
what preg_replace("/(\[email (.*)\])/e", "spam(\"\\2\") does is:
find "[email .*]"" replace "\2" with ".*" so "spam(\"\\2\")" becoms something like this "spam(\"\xzl0036@auburn.edu\")" 
make a test using "xzl0036@[email gmail@gmail.edu] xzk0036@auburn.edu abc"
xzl0036@gmail AT gmail dot edu xzk0036@auburn.edu abc

"[email gmail@gmail.edu]" has been replaced with gmail AT gmail dot edu
gmail@gmail.edu is extracted out and passed as argument to spam(), the spam is executed. (The key point of 																										this challenge may be
																							here since the string is executed as function/command)

ls -al
we have execution permission on flag09
try ./flag09  and ./flag09 "test" "123"

two errors in line 22 and one error in line 13
13 $contents = file_get_contents($filename);
22 $output = markup($argv[1], $argv[2]);
supply file name as arguments

At this point we can guess that we need to make up a magic string for the second argument but anyway let's try ./flag09 flag09 "123" to see what will happend

use two different strings as the second argument, the screenshots are level09-1 and level09-2
the original test is level09-3 (notice this, what if we have a ;/bin/getflag appendded? or even the output is /bin/getflag?)

because we dont have any write permission in the folder of flag09
so swtich to /tmp folder and vim level09
[email gmail@gmail.edu]
[email gmail@gmail.edu];/bin/getflag (add this to the first line)
execute "./flag09 /tmp/level09 "test""
the output is gmail AT gmail dot edu;/bin/getflag
so how to make it to be executed?
have not idea. Let's try something else

as mentioned before /e is discard in php5.5, so the the vulnerability may be related to /e or preg_replace function
try to search vulnerability of preg in php
The second one looks related to this challenge
http://www.madirish.net/402

The code execution approach mentioned there doesnt work for us, but the idea may be true
try to search again



"so you can use backticks with the '/e' flag to cause PHP code to be evaluated"
However since we can not modifiy the source code so this approach does not work for us.

Add email "(system(ls -al))" to the first line of /tmp/level09 and execute the php file with it

(system(ls -al)) is printed out as a string

we want to execute the system(ls -al) as function 
search in goodle (keywords:****)
http://stackoverflow.com/questions/1005857/how-to-call-php-function-from-string-stored-in-a-variable
solution: $functionname  this does not work either

look at the first answer at here and its reference: http://stackoverflow.com/questions/3822839/is-that-possible-to-expand-function-call-in-php-string

and it works

5 hours

TODO:
http://phpsecurity.readthedocs.org/en/latest/Injection-Attacks.html
https://www.owasp.org/index.php/Command_Injection